<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>无标题文档</title>
<style type="text/css">
	body{
		background-image: none;
		border:1px #000 solid;

	}
</style>
</head>

<body>
<canvas id="canvas" style="border:1px rgba(0,0,0,1.00) solid">
我去,你的浏览器不支持canvas
</canvas>
<script>
//简单实现requestAnimFrame兼容性
window.requestAnimFrame = (function(){
  return  window.requestAnimationFrame       ||
          window.webkitRequestAnimationFrame ||
          window.mozRequestAnimationFrame    ||
          function( callback ){
            window.setTimeout(callback, 1000 / 60);
          };
})();

var can;
var ctx;
var WINDOW_WIDTH = 1024;
var WINDOW_HEIGHT = 500;
var ball = { x:512,y:100,r:20,g:1,vx:-10,vy:-8,color:"#393550"};
var deltaTime;

	

window.onload = init();

function init(){
	
	can = document.getElementById("canvas");
	ctx = can.getContext("2d");
	can.width = WINDOW_WIDTH;
	can.height = WINDOW_HEIGHT;
	lastTime= Date.now();
	gameloop();	
}


function gameloop(){
	

	window.requestAnimFrame(gameloop);
	
	var now = Date.now();
	deltaTime = now - lastTime;
	lastTime = now;
	
	
	
	drawBg();
	
	render();
	update();
	

}
function update(){


	ball.x += ball.vx;
	ball.y += ball.vy;
	ball.vy += ball.g;
	
	if(ball.y>=WINDOW_HEIGHT-ball.r){
		ball.y = WINDOW_HEIGHT-ball.r;
		ball.vy= -0.9*(ball.vy - 2);	
	}
	if(ball.x <= ball.r){
		ball.x = ball.r; 
		ball.vx = -(ball.vx + 2);		
	}
	if(ball.x >= WINDOW_WIDTH - ball.r){
		ball.x = WINDOW_WIDTH - ball.r;
		ball.vx = - (ball.vx - 2);
	}

	
	
}

function render(){

	
	
	ctx.clearRect(0,0,ctx.canvas.width,ctx.canvas.height);
	ctx = can.getContext("2d");
	ctx.fillStyle = ball.color;	
	<!--console.log(ball.color);-->
	ctx.beginPath();
	
	ctx.arc(ball.x,ball.y,ball.r,0,2*Math.PI);
	
	
	
	ctx.lineWidth = 1;
	ctx.strokeStyle = "#333"
	ctx.stroke();
	ctx.fill();
	ctx.closePath();
	

}
function drawBg(){
	ctx.fillStyle = "#393550";
	ctx.fillRect(0,0,20,20);
	
	
	
}


</script>
</body>
</html>
